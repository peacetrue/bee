= 设计

== 数据转换

// Formatter

数据转换类图如下：

.类图
[plantuml,target=class-diagram,format=png]
----
@startuml

interface 转换服务 {
    目标数据 转换(原始数据，原始数据类型，目标数据类型)
}

interface 格式化器注册器 {
    注册(数据类型，格式化器)
    数据类型集合 获取数据类型()
}

class 转换服务实现 {
    键值对<数据类型, 格式化器> 格式化器组
    目标数据 转换(原始数据，原始数据类型，目标数据类型)
}

note bottom of 转换服务实现
初始注册格式化器
注册("XML","XML 格式化器")
注册("JSON","JSON 格式化器")
注册("YAML","YAML 格式化器")
注册("Properties","Properties 格式化器")
注册("Postman","Postman 格式化器")
end note

转换服务 <|.. 转换服务实现
格式化器注册器 <|.. 转换服务实现
格式化器 <.. 转换服务实现

interface 格式化器 {
   键值对 解析(文本数据)
   文本数据 打印(键值对)
}

格式化器 <|.. "XML 格式化器"
格式化器 <|.. "JSON 格式化器"
格式化器 <|.. "YAML 格式化器"
格式化器 <|.. "Properties 格式化器"
格式化器 <|.. "Postman 格式化器"

@enduml
----

转换服务实现逻辑如下：

.活动图
[plantuml,target=activity-diagram,format=png]
----
@startuml
start
:根据 **原始数据类型** 获取 **格式化器**;
:解析 **原始数据** 为 **键值对**;
:根据 **目标数据类型** 获取 **格式化器**;
:打印 **键值对** 为 **目标数据**;
stop
@enduml
----

.时序图
[plantuml,target=sequence-diagram,format=png]
----
@startuml
autonumber
actor 用户 as Client
Client --> 浏览器: 访问转换页面
浏览器 --> 格式化器注册器: 获取支持的 **数据类型**
浏览器 <-- 格式化器注册器: 返回支持的 **数据类型**
Client <-- 浏览器: 返回转换页面
Client --> 浏览器: 点击提交数据转换
note left: 输入原始数据\n选择原始数据类型\n选择目标数据类型
浏览器 --> 转换服务: 发送转换请求
转换服务 --> 转换服务: 获取原始数据 **格式化器**
转换服务 --> 格式化器: 转换 **原始数据**
转换服务 <-- 格式化器: 返回 **键值对**
转换服务 --> 转换服务: 获取目标数据 **格式化器**
转换服务 --> 格式化器: 转换 **键值对**
转换服务 <-- 格式化器: 返回 **目标数据**
浏览器 <-- 转换服务: 返回 **目标数据**
@enduml
----

